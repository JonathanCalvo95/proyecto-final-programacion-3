# ğŸ§© Backend - API Coworking

API REST desarrollada en **Node.js + Express + TypeScript** conectada a **MongoDB** mediante Mongoose.  
Gestiona usuarios, espacios y reservas con autenticaciÃ³n JWT y roles.

---

## ğŸš€ Iniciar el servidor

```bash
npm install
cp .env.example .env
npm run seed
npm run dev
```

Servidor disponible en: [http://localhost:4000](http://localhost:4000)

---

## âš™ï¸ Variables de entorno

Archivo `.env`:

```
PORT=4000
MONGO_URI=mongodb://localhost:27017/coworking
JWT_SECRET=clave_ultra_segura
JWT_EXPIRES=7d
LOG_PATH=./logs/errors.log
```

---

## ğŸ§± Estructura del proyecto

```
src/
 â”œâ”€ routes/          â†’ rutas (auth, users, spaces, bookings)
 â”œâ”€ schemas/         â†’ modelos Mongoose
 â”œâ”€ middlewares/     â†’ autenticaciÃ³n, manejo de errores, validaciones
 â”œâ”€ utils/           â†’ conexiÃ³n a MongoDB, logger, helpers
 â”œâ”€ app.ts           â†’ configuraciÃ³n Express
 â””â”€ bin/www.ts       â†’ arranque del servidor
```

---

## ğŸ§® Endpoints principales

| MÃ©todo | Ruta                       | DescripciÃ³n             |
| ------ | -------------------------- | ----------------------- |
| POST   | `/api/auth/register`       | Crear usuario nuevo     |
| POST   | `/api/auth/login`          | Login y JWT             |
| GET    | `/api/users/me`            | Perfil del usuario      |
| GET    | `/api/spaces`              | Listar espacios activos |
| POST   | `/api/spaces`              | Crear espacio (admin)   |
| POST   | `/api/bookings`            | Reservar un espacio     |
| PATCH  | `/api/bookings/:id/cancel` | Cancelar reserva        |
| GET    | `/api/admin/metrics`       | MÃ©tricas (admin)        |

---

## ğŸ§¾ MigraciÃ³n inicial (seed)

Crea usuarios y espacios base:

```bash
npm run seed
```

**Usuarios iniciales:**

- `admin@cowork.com` / `Admin123!`
- `cliente@cowork.com` (si estÃ¡ habilitado en el seed)

---

## ğŸ§° Scripts Ãºtiles

| Comando         | DescripciÃ³n                      |
| --------------- | -------------------------------- |
| `npm run dev`   | Ejecuta el servidor con nodemon  |
| `npm run build` | Compila TypeScript a JavaScript  |
| `npm start`     | Inicia el servidor en producciÃ³n |
| `npm run seed`  | Ejecuta la migraciÃ³n inicial     |

---

## ğŸ§  CaracterÃ­sticas

- JWT en cookie httpOnly
- Manejo centralizado de errores
- Logs en archivo `logs/errors.log`
- ValidaciÃ³n de solapamiento de reservas
- Estructura clara y mantenible

---

## ğŸ§¾ Licencia

Uso educativo â€“ ProgramaciÃ³n 3 (2025)
